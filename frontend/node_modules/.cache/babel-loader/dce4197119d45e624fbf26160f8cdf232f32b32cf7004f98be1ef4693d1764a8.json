{"ast":null,"code":"import _objectSpread from\"/root/crypto-token-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useForm}from'react-hook-form';import toast from'react-hot-toast';import{tokenAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TransferForm=_ref=>{let{tokens=[],wallets=[],onSuccess}=_ref;const{register,handleSubmit,reset,setValue,watch,formState:{errors}}=useForm();const[isLoading,setIsLoading]=useState(false);const selectedTokenId=watch('token_id');const selectedFromAddress=watch('from_address');const generateAddress=()=>{const chars='0123456789abcdef';let address='0x';for(let i=0;i<40;i++){address+=chars[Math.floor(Math.random()*chars.length)];}setValue('to_address',address);};const getBalance=()=>{var _wallet$balances;if(!selectedTokenId||!selectedFromAddress)return 0;const wallet=wallets.find(w=>w.address===selectedFromAddress);return(wallet===null||wallet===void 0?void 0:(_wallet$balances=wallet.balances)===null||_wallet$balances===void 0?void 0:_wallet$balances[selectedTokenId])||0;};const onSubmit=async data=>{setIsLoading(true);try{const result=await tokenAPI.transferTokens({token_id:data.token_id,from_address:data.from_address,to_address:data.to_address,amount:parseFloat(data.amount)});toast.success(result.message);reset();onSuccess===null||onSuccess===void 0?void 0:onSuccess();}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to transfer tokens');}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"\\uD83D\\uDCB8 Transfer Tokens\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Send tokens between wallets\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium\",children:\"Select Token\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register('token_id',{required:'Token selection is required'})),{},{className:\"w-full border p-2 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose a token...\"}),tokens.map(token=>/*#__PURE__*/_jsxs(\"option\",{value:token.id,children:[token.name,\" (\",token.symbol,\")\"]},token.id))]})),errors.token_id&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:errors.token_id.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium\",children:\"From Address\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register('from_address',{required:'Sender address is required'})),{},{className:\"w-full border p-2 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select sender wallet...\"}),wallets.map(wallet=>/*#__PURE__*/_jsxs(\"option\",{value:wallet.address,children:[wallet.address.slice(0,10),\"...\",wallet.address.slice(-8)]},wallet.address))]})),errors.from_address&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:errors.from_address.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium\",children:\"To Address\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register('to_address',{required:'Recipient address is required'})),{},{className:\"flex-1 border p-2 rounded\",placeholder:\"0x742d35Cc6634C0532925a3b8D404fD4C0b4f5678\"})),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:generateAddress,className:\"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700\",children:\"Generate\"})]}),errors.to_address&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:errors.to_address.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"number\",step:\"0.01\"},register('amount',{required:'Amount is required',min:{value:0.01,message:'Amount must be greater than 0'}})),{},{className:\"w-full border p-2 rounded\",placeholder:\"100.00\"})),selectedTokenId&&selectedFromAddress&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Available balance: \",getBalance().toLocaleString()]}),errors.amount&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:errors.amount.message})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"w-full py-3 bg-blue-600 text-white rounded hover:bg-blue-700 transition\",children:isLoading?'Processing Transfer...':'ðŸ’¸ Transfer Tokens'})]});};export default TransferForm;","map":{"version":3,"names":["React","useState","useForm","toast","tokenAPI","jsx","_jsx","jsxs","_jsxs","TransferForm","_ref","tokens","wallets","onSuccess","register","handleSubmit","reset","setValue","watch","formState","errors","isLoading","setIsLoading","selectedTokenId","selectedFromAddress","generateAddress","chars","address","i","Math","floor","random","length","getBalance","_wallet$balances","wallet","find","w","balances","onSubmit","data","result","transferTokens","token_id","from_address","to_address","amount","parseFloat","success","message","error","_error$response","_error$response$data","response","className","children","_objectSpread","required","value","map","token","id","name","symbol","slice","type","placeholder","onClick","step","min","toLocaleString","disabled"],"sources":["/root/crypto-token-app/frontend/src/components/TransferForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport toast from 'react-hot-toast';\nimport { tokenAPI } from '../services/api';\n\nconst TransferForm = ({ tokens = [], wallets = [], onSuccess }) => {\n  const {\n    register,\n    handleSubmit,\n    reset,\n    setValue,\n    watch,\n    formState: { errors },\n  } = useForm();\n\n  const [isLoading, setIsLoading] = useState(false);\n\n  const selectedTokenId = watch('token_id');\n  const selectedFromAddress = watch('from_address');\n\n  const generateAddress = () => {\n    const chars = '0123456789abcdef';\n    let address = '0x';\n    for (let i = 0; i < 40; i++) {\n      address += chars[Math.floor(Math.random() * chars.length)];\n    }\n    setValue('to_address', address);\n  };\n\n  const getBalance = () => {\n    if (!selectedTokenId || !selectedFromAddress) return 0;\n    const wallet = wallets.find((w) => w.address === selectedFromAddress);\n    return wallet?.balances?.[selectedTokenId] || 0;\n  };\n\n  const onSubmit = async (data) => {\n    setIsLoading(true);\n    try {\n      const result = await tokenAPI.transferTokens({\n        token_id: data.token_id,\n        from_address: data.from_address,\n        to_address: data.to_address,\n        amount: parseFloat(data.amount),\n      });\n      toast.success(result.message);\n      reset();\n      onSuccess?.();\n    } catch (error) {\n      toast.error(error.response?.data?.message || 'Failed to transfer tokens');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\n      <h3 className=\"text-lg font-semibold\">ðŸ’¸ Transfer Tokens</h3>\n      <p className=\"text-sm text-gray-600\">Send tokens between wallets</p>\n\n      {/* Token Selection */}\n      <div>\n        <label className=\"block font-medium\">Select Token</label>\n        <select\n          {...register('token_id', { required: 'Token selection is required' })}\n          className=\"w-full border p-2 rounded\"\n        >\n          <option value=\"\">Choose a token...</option>\n          {tokens.map((token) => (\n            <option key={token.id} value={token.id}>\n              {token.name} ({token.symbol})\n            </option>\n          ))}\n        </select>\n        {errors.token_id && <p className=\"text-red-500 text-sm\">{errors.token_id.message}</p>}\n      </div>\n\n      {/* From Address */}\n      <div>\n        <label className=\"block font-medium\">From Address</label>\n        <select\n          {...register('from_address', { required: 'Sender address is required' })}\n          className=\"w-full border p-2 rounded\"\n        >\n          <option value=\"\">Select sender wallet...</option>\n          {wallets.map((wallet) => (\n            <option key={wallet.address} value={wallet.address}>\n              {wallet.address.slice(0, 10)}...{wallet.address.slice(-8)}\n            </option>\n          ))}\n        </select>\n        {errors.from_address && <p className=\"text-red-500 text-sm\">{errors.from_address.message}</p>}\n      </div>\n\n      {/* To Address */}\n      <div>\n        <label className=\"block font-medium\">To Address</label>\n        <div className=\"flex gap-2\">\n          <input\n            type=\"text\"\n            {...register('to_address', { required: 'Recipient address is required' })}\n            className=\"flex-1 border p-2 rounded\"\n            placeholder=\"0x742d35Cc6634C0532925a3b8D404fD4C0b4f5678\"\n          />\n          <button\n            type=\"button\"\n            onClick={generateAddress}\n            className=\"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700\"\n          >\n            Generate\n          </button>\n        </div>\n        {errors.to_address && <p className=\"text-red-500 text-sm\">{errors.to_address.message}</p>}\n      </div>\n\n      {/* Amount */}\n      <div>\n        <label className=\"block font-medium\">Amount</label>\n        <input\n          type=\"number\"\n          step=\"0.01\"\n          {...register('amount', {\n            required: 'Amount is required',\n            min: { value: 0.01, message: 'Amount must be greater than 0' },\n          })}\n          className=\"w-full border p-2 rounded\"\n          placeholder=\"100.00\"\n        />\n        {selectedTokenId && selectedFromAddress && (\n          <p className=\"text-sm text-gray-500\">\n            Available balance: {getBalance().toLocaleString()}\n          </p>\n        )}\n        {errors.amount && <p className=\"text-red-500 text-sm\">{errors.amount.message}</p>}\n      </div>\n\n      {/* Submit Button */}\n      <button\n        type=\"submit\"\n        disabled={isLoading}\n        className=\"w-full py-3 bg-blue-600 text-white rounded hover:bg-blue-700 transition\"\n      >\n        {isLoading ? 'Processing Transfer...' : 'ðŸ’¸ Transfer Tokens'}\n      </button>\n    </form>\n  );\n};\n\nexport default TransferForm;"],"mappings":"oHAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,OAAO,KAAQ,iBAAiB,CACzC,MAAO,CAAAC,KAAK,KAAM,iBAAiB,CACnC,OAASC,QAAQ,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3C,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAA8C,IAA7C,CAAEC,MAAM,CAAG,EAAE,CAAEC,OAAO,CAAG,EAAE,CAAEC,SAAU,CAAC,CAAAH,IAAA,CAC5D,KAAM,CACJI,QAAQ,CACRC,YAAY,CACZC,KAAK,CACLC,QAAQ,CACRC,KAAK,CACLC,SAAS,CAAE,CAAEC,MAAO,CACtB,CAAC,CAAGlB,OAAO,CAAC,CAAC,CAEb,KAAM,CAACmB,SAAS,CAAEC,YAAY,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CAEjD,KAAM,CAAAsB,eAAe,CAAGL,KAAK,CAAC,UAAU,CAAC,CACzC,KAAM,CAAAM,mBAAmB,CAAGN,KAAK,CAAC,cAAc,CAAC,CAEjD,KAAM,CAAAO,eAAe,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAAAC,KAAK,CAAG,kBAAkB,CAChC,GAAI,CAAAC,OAAO,CAAG,IAAI,CAClB,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAG,EAAE,CAAEA,CAAC,EAAE,CAAE,CAC3BD,OAAO,EAAID,KAAK,CAACG,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,CAAGL,KAAK,CAACM,MAAM,CAAC,CAAC,CAC5D,CACAf,QAAQ,CAAC,YAAY,CAAEU,OAAO,CAAC,CACjC,CAAC,CAED,KAAM,CAAAM,UAAU,CAAGA,CAAA,GAAM,KAAAC,gBAAA,CACvB,GAAI,CAACX,eAAe,EAAI,CAACC,mBAAmB,CAAE,MAAO,EAAC,CACtD,KAAM,CAAAW,MAAM,CAAGvB,OAAO,CAACwB,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACV,OAAO,GAAKH,mBAAmB,CAAC,CACrE,MAAO,CAAAW,MAAM,SAANA,MAAM,kBAAAD,gBAAA,CAANC,MAAM,CAAEG,QAAQ,UAAAJ,gBAAA,iBAAhBA,gBAAA,CAAmBX,eAAe,CAAC,GAAI,CAAC,CACjD,CAAC,CAED,KAAM,CAAAgB,QAAQ,CAAG,KAAO,CAAAC,IAAI,EAAK,CAC/BlB,YAAY,CAAC,IAAI,CAAC,CAClB,GAAI,CACF,KAAM,CAAAmB,MAAM,CAAG,KAAM,CAAArC,QAAQ,CAACsC,cAAc,CAAC,CAC3CC,QAAQ,CAAEH,IAAI,CAACG,QAAQ,CACvBC,YAAY,CAAEJ,IAAI,CAACI,YAAY,CAC/BC,UAAU,CAAEL,IAAI,CAACK,UAAU,CAC3BC,MAAM,CAAEC,UAAU,CAACP,IAAI,CAACM,MAAM,CAChC,CAAC,CAAC,CACF3C,KAAK,CAAC6C,OAAO,CAACP,MAAM,CAACQ,OAAO,CAAC,CAC7BjC,KAAK,CAAC,CAAC,CACPH,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAG,CAAC,CACf,CAAE,MAAOqC,KAAK,CAAE,KAAAC,eAAA,CAAAC,oBAAA,CACdjD,KAAK,CAAC+C,KAAK,CAAC,EAAAC,eAAA,CAAAD,KAAK,CAACG,QAAQ,UAAAF,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBX,IAAI,UAAAY,oBAAA,iBAApBA,oBAAA,CAAsBH,OAAO,GAAI,2BAA2B,CAAC,CAC3E,CAAC,OAAS,CACR3B,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,mBACEd,KAAA,SAAM+B,QAAQ,CAAExB,YAAY,CAACwB,QAAQ,CAAE,CAACe,SAAS,CAAC,WAAW,CAAAC,QAAA,eAC3DjD,IAAA,OAAIgD,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,8BAAkB,CAAI,CAAC,cAC7DjD,IAAA,MAAGgD,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,6BAA2B,CAAG,CAAC,cAGpE/C,KAAA,QAAA+C,QAAA,eACEjD,IAAA,UAAOgD,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,cAAY,CAAO,CAAC,cACzD/C,KAAA,UAAAgD,aAAA,CAAAA,aAAA,IACM1C,QAAQ,CAAC,UAAU,CAAE,CAAE2C,QAAQ,CAAE,6BAA8B,CAAC,CAAC,MACrEH,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eAErCjD,IAAA,WAAQoD,KAAK,CAAC,EAAE,CAAAH,QAAA,CAAC,mBAAiB,CAAQ,CAAC,CAC1C5C,MAAM,CAACgD,GAAG,CAAEC,KAAK,eAChBpD,KAAA,WAAuBkD,KAAK,CAAEE,KAAK,CAACC,EAAG,CAAAN,QAAA,EACpCK,KAAK,CAACE,IAAI,CAAC,IAAE,CAACF,KAAK,CAACG,MAAM,CAAC,GAC9B,GAFaH,KAAK,CAACC,EAEX,CACT,CAAC,GACI,CAAC,CACRzC,MAAM,CAACuB,QAAQ,eAAIrC,IAAA,MAAGgD,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAEnC,MAAM,CAACuB,QAAQ,CAACM,OAAO,CAAI,CAAC,EAClF,CAAC,cAGNzC,KAAA,QAAA+C,QAAA,eACEjD,IAAA,UAAOgD,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,cAAY,CAAO,CAAC,cACzD/C,KAAA,UAAAgD,aAAA,CAAAA,aAAA,IACM1C,QAAQ,CAAC,cAAc,CAAE,CAAE2C,QAAQ,CAAE,4BAA6B,CAAC,CAAC,MACxEH,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eAErCjD,IAAA,WAAQoD,KAAK,CAAC,EAAE,CAAAH,QAAA,CAAC,yBAAuB,CAAQ,CAAC,CAChD3C,OAAO,CAAC+C,GAAG,CAAExB,MAAM,eAClB3B,KAAA,WAA6BkD,KAAK,CAAEvB,MAAM,CAACR,OAAQ,CAAA4B,QAAA,EAChDpB,MAAM,CAACR,OAAO,CAACqC,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAAC,KAAG,CAAC7B,MAAM,CAACR,OAAO,CAACqC,KAAK,CAAC,CAAC,CAAC,CAAC,GAD9C7B,MAAM,CAACR,OAEZ,CACT,CAAC,GACI,CAAC,CACRP,MAAM,CAACwB,YAAY,eAAItC,IAAA,MAAGgD,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAEnC,MAAM,CAACwB,YAAY,CAACK,OAAO,CAAI,CAAC,EAC1F,CAAC,cAGNzC,KAAA,QAAA+C,QAAA,eACEjD,IAAA,UAAOgD,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,YAAU,CAAO,CAAC,cACvD/C,KAAA,QAAK8C,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjD,IAAA,SAAAkD,aAAA,CAAAA,aAAA,EACES,IAAI,CAAC,MAAM,EACPnD,QAAQ,CAAC,YAAY,CAAE,CAAE2C,QAAQ,CAAE,+BAAgC,CAAC,CAAC,MACzEH,SAAS,CAAC,2BAA2B,CACrCY,WAAW,CAAC,4CAA4C,EACzD,CAAC,cACF5D,IAAA,WACE2D,IAAI,CAAC,QAAQ,CACbE,OAAO,CAAE1C,eAAgB,CACzB6B,SAAS,CAAC,4DAA4D,CAAAC,QAAA,CACvE,UAED,CAAQ,CAAC,EACN,CAAC,CACLnC,MAAM,CAACyB,UAAU,eAAIvC,IAAA,MAAGgD,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAEnC,MAAM,CAACyB,UAAU,CAACI,OAAO,CAAI,CAAC,EACtF,CAAC,cAGNzC,KAAA,QAAA+C,QAAA,eACEjD,IAAA,UAAOgD,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,QAAM,CAAO,CAAC,cACnDjD,IAAA,SAAAkD,aAAA,CAAAA,aAAA,EACES,IAAI,CAAC,QAAQ,CACbG,IAAI,CAAC,MAAM,EACPtD,QAAQ,CAAC,QAAQ,CAAE,CACrB2C,QAAQ,CAAE,oBAAoB,CAC9BY,GAAG,CAAE,CAAEX,KAAK,CAAE,IAAI,CAAET,OAAO,CAAE,+BAAgC,CAC/D,CAAC,CAAC,MACFK,SAAS,CAAC,2BAA2B,CACrCY,WAAW,CAAC,QAAQ,EACrB,CAAC,CACD3C,eAAe,EAAIC,mBAAmB,eACrChB,KAAA,MAAG8C,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,qBAChB,CAACtB,UAAU,CAAC,CAAC,CAACqC,cAAc,CAAC,CAAC,EAChD,CACJ,CACAlD,MAAM,CAAC0B,MAAM,eAAIxC,IAAA,MAAGgD,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAEnC,MAAM,CAAC0B,MAAM,CAACG,OAAO,CAAI,CAAC,EAC9E,CAAC,cAGN3C,IAAA,WACE2D,IAAI,CAAC,QAAQ,CACbM,QAAQ,CAAElD,SAAU,CACpBiC,SAAS,CAAC,yEAAyE,CAAAC,QAAA,CAElFlC,SAAS,CAAG,wBAAwB,CAAG,oBAAoB,CACtD,CAAC,EACL,CAAC,CAEX,CAAC,CAED,cAAe,CAAAZ,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}